<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-9999</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>c1 = c_green;
c2 = c_olive;
c3 = c_olive;
c4 = c_olive;
text = "";
can_read_mouse = true;
screen = 1;
position = 1;
max_option = 4;
can_switch = true;
screenx = room_width / 2;
screeny = room_height / 2;
recalpha = 0;
option_audio = snd_menu_accept;
lastx = mouse_x;
lasty = mouse_y;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_create(0, 0, obj_menu_extras_handler);
audio_sound_gain(global.menu1, 0, 500);
audio_sound_gain(global.menu2, global.music_volume, 500);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Removes the fade in animation.
if(recalpha &gt; 0) {
    recalpha -= 1 / 15;
    alarm[2] = 1;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Fades in the "new room" and performs the action selected on the menu.
if(recalpha &lt; 1) {
    recalpha += 1 / 15;
    alarm[1] = 1;
} else {
    if(position == 1) {
        if(screen ==1) {
            global.gamemode =  gm_campaign;
            room_goto_next();
        }
    } else if(position == 2) {
        if(screen == 1) {
            screen = 2;  
            instance_destroy();               
        } else if(screen == 2) {
            global.gamemode =  gm_siege_mode;
            room_goto_next();       
        }
    }else if(position == 3) {
        if(screen == 1) {
            position = 1;
            screen = 3;          
        } else if(screen == 3){
            position = 1;        
            screen = 1;          
        }
    } else if(position == 4) {
        if(screen == 1) {
            game_end();        
        } else if(screen == 2) {      
            screen = 1;
            background_index[0] = bck_main;            
        }
    }  
    alarm[2] = 1;  
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>can_switch = true;
can_read_mouse = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Limits menu options depending on which menu the game is.
if(screen == 1 || screen == 2) {
    max_option = 4;
} else if(screen == 3){
    max_option = 3;
}

// The mouse can select things if the cursor is in especified areas
if(global.control) {
    // Allows mouse cursor movement through the menus
    if((mouse_x &gt; screenx - 512 &amp;&amp; mouse_x &lt; screenx + 512) &amp;&amp; (mouse_y &gt; screeny + 13 &amp;&amp; mouse_y &lt; screenx + 190) &amp;&amp; (can_read_mouse)) {    
        if(mouse_y &gt; screeny - 48 &amp;&amp; mouse_y &lt; screeny + 48) {
            position = 1;           
        } else if(mouse_y &gt; screeny + 48 &amp;&amp; mouse_y &lt; screeny + 96) {
            position = 2;              
        } else if(mouse_y &gt; screeny + 96 &amp;&amp; mouse_y &lt; screeny + 144) {
            position = 3;               
        } else if(mouse_y &gt; screeny + 144 &amp;&amp; mouse_y &lt; screeny + 192 &amp;&amp; max_option &gt; 3) {
            position = 4;         
        }
    }
}

// Allows gamepad movement through the menus
if((gamepad_axis_value(0, gp_axislv) &lt; -0.5 || keyboard_check_pressed(vk_up) || keyboard_check_pressed(ord('W'))) &amp;&amp; can_switch == true) {
    can_switch = false;
    position --;
    alarm[0] = 15;
    audio_play_sound(snd_menu_cursor, 0, false);
} else if((gamepad_axis_value(0, gp_axislv) &gt; 0.5 || keyboard_check_pressed(vk_down) || keyboard_check_pressed(ord('S'))) &amp;&amp; can_switch == true) {
    can_switch = false;
    position ++;
    alarm[0] = 15;
    audio_play_sound(snd_menu_cursor, 0, false);
} 

// Responds to which element of the menu is selected when pressing the A button or the left click.
if(gamepad_button_check_pressed(0, gp_face1) || mouse_check_button_pressed(mb_left)) {
    if(position == max_option) {
        option_audio = snd_menu_cancel;
    } else {
        option_audio = snd_menu_accept;
    }
    
    if(can_switch) {
        can_switch = false;
        alarm[1] = 1;
        alarm[0] = 15;        
        audio_play_sound(option_audio, 0, false);   
    }
}

if(gamepad_button_check_pressed(0, gp_face2) || mouse_check_button_pressed(mb_right) || keyboard_check_pressed(vk_escape)) {    
    if(can_switch) {
        can_switch = false;
        can_read_mouse = false;
        position = max_option;
        alarm[1] = 1;
        alarm[0] = 15;
        audio_play_sound(option_audio, 0, false);   
    }
}

// Sets the color of the selected element and its text depennding on which screen it is.
if(position == 1) {
    c1 = c_green;
    c2 = c_olive;
    c3 = c_olive;
    c4 = c_olive;
    if(screen == 1) {
        text = getString("menu_description_1");
    } else if(screen == 3)  {
        text = getString("menu_description_2");
    }           
} else if(position == 2) {
    c1 = c_olive;
    c2 = c_green;
    c3 = c_olive;
    c4 = c_olive;    
    if(screen == 1) {
        text = getString("menu_description_3");
    } else if(screen == 3)  {
        text = getString("menu_description_4"); 
    }                 
} else if(position == 3) {
    c1 = c_olive;
    c2 = c_olive;
    c3 = c_green;
    c4 = c_olive;  
    if(screen == 1) {
        text = getString("menu_description_5");
    } else if(screen == 3)  {
        text = getString("menu_description_back");
    }      
} else {
    c1 = c_olive;
    c2 = c_olive;
    c3 = c_olive;
    c4 = c_green;    
    if(screen == 1) {
        text = getString("menu_description_exit");  
    } else if(screen == 2) {
        text = getString("menu_description_back"); 
    }
}

// Loops the positions of the menu
if(position &lt; 1) {
    position = max_option;
} else if(position &gt; max_option) {
    position = 1;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Draws the menus text.
draw_set_font(fnt_menu); // Sets the font to the menu font.
draw_set_halign(fa_center); // Sets the text alignment to the center.
if(screen == 1) {
    draw_text_colour(screenx, 16, getString("menu_main_title"), c_white, c_white, c_white, c_white, 1);
    draw_text_colour(screenx, screeny, getString("menu_main_option_1"), c1, c1, c1, c1, 1);
    draw_text_colour(screenx, screeny + 48, getString("menu_main_option_2"), c2, c2, c2, c2, 1);
    draw_text_colour(screenx, screeny + 48*2, getString("menu_main_option_3"), c3, c3, c3, c3, 1);
    draw_text_colour(screenx, screeny + 48*3, getString("menu_option_exit"), c4, c4, c4, c4, 1);
} else if(screen == 3) {
    draw_text_colour(screenx, 16, getString("menu_options_title"), c_white, c_white, c_white, c_white, 1);
    draw_text_colour(screenx, screeny, getString("menu_options_option_1"), c1, c1, c1, c1, 1);
    draw_text_colour(screenx, screeny + 48, getString("menu_options_option_2"), c2, c2, c2, c2, 1);
    draw_text_colour(screenx, screeny + 48*2, getString("menu_option_back"), c3, c3, c3, c3, 1);
}

draw_menu_indicator();
draw_set_alpha(1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
